{"ast":null,"code":"import { USERLIST, SELECTLIST, SHOWDATE1, SHOWDATE2, SELECTDATA, INITIALIZE } from \"./actionTypes\"; //用fetch请求到数据\n\nexport const showUserAction = () => {\n  return dispatch => {\n    fetch(\"http://pre.zhushang.net/Supplychain/getDataForHavePost\", {\n      method: \"post\",\n      mode: \"cors\",\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded\"\n      },\n      body: \"type=1&page=1&num=20\"\n    }).then(response => {\n      return response.json();\n    }).then(responseText => {\n      const arr1 = responseText.slice(0, 8);\n      const arr2 = responseText.slice(10);\n      const arr = [...arr1, ...arr2];\n      const action = {\n        type: USERLIST,\n        value: arr\n      };\n      dispatch(action);\n    });\n  };\n}; // 按钮点击查询的功能\n\nexport const selectListAction = () => {\n  return (dispatch, getState) => {\n    const time1 = new Date(getState().dateValue1).getTime();\n    const time2 = new Date(getState().dateValue2).getTime();\n    const arr = getState().userlis;\n    const newarr = arr.filter(elem => {\n      const litime = new Date(elem.create_time.slice(0, 10)).getTime();\n      return litime >= time1 && litime <= time2;\n    });\n    const action = {\n      type: SELECTLIST,\n      value: newarr\n    };\n    dispatch(action);\n  };\n}; //将日期1的值传入到state中\n\nexport const showDate1Action = e => {\n  return dispatch => {\n    const action = {\n      type: SHOWDATE1,\n      value: e.target.value\n    };\n    dispatch(action);\n  };\n}; //将日期2的值传入到state中\n\nexport const showDate2Action = e => {\n  return dispatch => {\n    const action = {\n      type: SHOWDATE2,\n      value: e.target.value\n    };\n    dispatch(action);\n  };\n}; //根据查询的数据选择本页展示几条数据\n\nexport const selectDateAction = e => {\n  return (dispatch, getState) => {\n    const selectLisArr = getState().selectlis;\n    const action = {\n      type: INITIALIZE\n    };\n    dispatch(action);\n    let pshow = Number(e.target.value);\n    let pcount = getState().selectlis.length;\n    let arr = getState().selectlis; //判断当前页面有几条数据\n\n    if (pcount / pshow <= 3 && pcount / pshow > 2) {\n      const arr1 = arr.slice(0, pshow);\n      const arr2 = arr.slice(pshow, 2 * pshow);\n      const arr3 = arr.slice(2 * pshow);\n      this.setState({\n        nextpage: 3,\n        page: arr1,\n        pageShow: arr1,\n        page2: arr2,\n        page3: arr3\n      });\n    } else if (pcount / pshow > 1 && pcount / pshow <= 2) {\n      const arr4 = arr.slice(0, pshow);\n      const arr5 = arr.slice(pshow);\n      this.setState({\n        nextpage: 2,\n        page: arr4,\n        pageShow: arr4,\n        page2: arr5\n      });\n    } else {\n      const arr6 = arr.slice(0, arr.lenth);\n      this.setState({\n        nextpage: 1,\n        page: arr6,\n        pageShow: arr6\n      });\n    }\n  };\n};","map":{"version":3,"sources":["/Users/apple/Desktop/react-cli/my-app/src/store/actionCreators.js"],"names":["USERLIST","SELECTLIST","SHOWDATE1","SHOWDATE2","SELECTDATA","INITIALIZE","showUserAction","dispatch","fetch","method","mode","headers","body","then","response","json","responseText","arr1","slice","arr2","arr","action","type","value","selectListAction","getState","time1","Date","dateValue1","getTime","time2","dateValue2","userlis","newarr","filter","elem","litime","create_time","showDate1Action","e","target","showDate2Action","selectDateAction","selectLisArr","selectlis","pshow","Number","pcount","length","arr3","setState","nextpage","page","pageShow","page2","page3","arr4","arr5","arr6","lenth"],"mappings":"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","sourcesContent":["import {USERLIST,SELECTLIST,SHOWDATE1,SHOWDATE2,SELECTDATA,INITIALIZE} from \"./actionTypes\"\n//用fetch请求到数据\nexport const showUserAction = ()=>{\n    return (dispatch)=>{\n        fetch(\"http://pre.zhushang.net/Supplychain/getDataForHavePost\",{\n            method:\"post\",\n            mode:\"cors\",\n            headers:{\"Content-type\":\"application/x-www-form-urlencoded\"},\n            body:\"type=1&page=1&num=20\"\n        }).then(response=>{\n            return response.json()\n        }).then((responseText)=>{\n            const arr1=responseText.slice(0,8)\n            const arr2=responseText.slice(10)\n            const arr=[...arr1,...arr2]\n            const action={\n                type:USERLIST,\n                value:arr\n            }\n            dispatch(action)\n        })\n    }\n}\n// 按钮点击查询的功能\nexport const selectListAction=()=>{\n    return (dispatch,getState)=>{\n        const time1=new Date(getState().dateValue1).getTime()\n        const time2=new Date(getState().dateValue2).getTime()\n        const arr=getState().userlis\n        const newarr=arr.filter((elem)=>{\n            const litime=new Date(elem.create_time.slice(0,10)).getTime() \n            return litime>=time1&&litime<=time2\n        })\n        const action={\n            type:SELECTLIST,\n            value:newarr\n        }\n        dispatch(action)\n    }\n}\n//将日期1的值传入到state中\nexport const showDate1Action=(e)=>{\n    return (dispatch)=>{\n        const action={\n            type:SHOWDATE1,\n            value:e.target.value\n        }\n        dispatch(action)\n    }\n}\n//将日期2的值传入到state中\nexport const showDate2Action=(e)=>{\n    return (dispatch)=>{\n        const action={\n            type:SHOWDATE2,\n            value:e.target.value\n        }\n        dispatch(action)\n    }\n}\n//根据查询的数据选择本页展示几条数据\nexport const selectDateAction=(e)=>{\n    return (dispatch,getState)=>{\n        const selectLisArr=getState().selectlis\n        const action={\n            type:INITIALIZE\n        }\n        dispatch(action) \n        let pshow= Number(e.target.value)  \n        let pcount=getState().selectlis.length\n        let arr=getState().selectlis \n        //判断当前页面有几条数据\n        if(pcount/pshow<=3&&pcount/pshow>2){\n            const arr1=arr.slice(0,pshow)\n            const arr2=arr.slice(pshow,2*pshow)\n            const arr3=arr.slice(2*pshow)\n            this.setState({\n            nextpage:3,page:arr1,\n            pageShow:arr1,page2:arr2,page3:arr3 })\n        }\n        else if(pcount/pshow>1&&pcount/pshow<=2){\n            const arr4=arr.slice(0,pshow)\n            const arr5=arr.slice(pshow) \n            this.setState({\n            nextpage:2,page:arr4,\n            pageShow:arr4,page2:arr5 })\n        }\n        else{\n            const arr6=arr.slice(0,arr.lenth)\n            this.setState({nextpage:1,page:arr6,pageShow:arr6 })\n        }\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}